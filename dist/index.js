"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _iterableToArrayLimit(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var CTOR_PATTERN=/\[object\s(\w+)\]/,baseToString=Object.prototype.toString,getInternalCtor=function(t){return _slicedToArray(baseToString.call(t).match(CTOR_PATTERN),2)[1]},isPromiseLike=function(t){return t&&("Promise"===getInternalCtor(t)||isFunction(t.then)&&isFunction(t.catch))},isFunction=function(t){return"Function"===getInternalCtor(t)},isObject=function(t){return"Object"===getInternalCtor(t)},compose=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})},isCombineConfigMode=function(t){return isObject(t[0])},unwindLoop=function(t,e){var n=Function,r=Object.entries(e).map(function(t){var e=_slicedToArray(t,1)[0];return"box.".concat(e," = useCustomHook(fns.").concat(e,", deps, state, props);")}).join("\n");return new n("useCustomHook","fns","deps","state","props","\n    const box = {};\n    ".concat(r,"\n    return box\n  ")).bind(null,t,e)},prop=function(t,e){if(null==t)return t;var n=t,r=e.split("."),o=!0,i=!1,c=void 0;try{for(var a,u=r[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var f=a.value;if(!(n=n&&n[f]))return}}catch(t){i=!0,c=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}return n},getDeps=function(e,t){return Array.isArray(t)?t.map(function(t){return prop(e,t)}):t},defaultProps=function(e){return function(t){if("object"!==_typeof(e))throw Error("defaultProps expects object, got a ".concat(getInternalCtor(e)));return t.defaultProps=e,t}},identity=function(t){return t},flow=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},hookBuilder=function(t){var e=t.findIndex(function(t){return!isFunction(t)});if(-1!==e)throw Error("\n      Expects function,\n      got a: ".concat(_typeof(t[e]),"\n      on index: ").concat(e,"\n    "));var n=Function,r=t.map(function(t,e){return"\n    const state".concat(e+1," = {\n      ...state").concat(e,",\n      ...funcs[").concat(e,"](state").concat(e,", props),\n    };\n  ")}).join("\n");return new n("funcs","props","\n    const state0 = {};\n    ".concat(r,"\n    return state").concat(t.length,";\n  ")).bind(null,t)},combineFromConfig=function(t,n){var e=Object.assign({hooks:[],hocs:[],transformProps:identity},t),r=e.hooks,o=e.hocs,i=e.defaultProps,c=e.transformProps,a=hookBuilder(r);i&&defaultProps(i)(n);return flow.apply(void 0,_toConsumableArray(o))(function(t){var e=a(t);return React__default.createElement(n,c(_objectSpread({},e,t)))})},combine=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){var e=isCombineConfigMode(n)?combineFromConfig(n[0],t):combineFromConfig({hooks:n},t);return e.displayName="".concat(t.displayName||t.name,"Hooked"),e}},withCallbacks=function(t,n){var r=unwindLoop(function(t,e,n,r){var o=isFunction(t)?t:t.func,i=getDeps(_objectSpread({},n,r),t.deps||e);return React.useCallback(o(n,r),i)},t);return function(t,e){return r(n,t,e)}},withCallback=function(r,o,i){return function(t,e){var n=getDeps(e,i);return _defineProperty({},r,React.useCallback(o(t,e),n))}},withStateHandlers=function(y,d){return function(t,e){for(var n=isFunction(y)?y(t,e):y,r=_slicedToArray(React.useState(n),2),o=r[0],i=r[1],c={},a=function(t){return i(_objectSpread({},o,t))},u=0,f=Object.entries(d);u<f.length;u++){var s=_slicedToArray(f[u],2),l=s[0],p=s[1];c[l]=compose(a,p(o))}return _objectSpread({},o,c)}},withAsyncEffect=function(i,c,a){if(!isFunction(i))throw Error("withAsyncEffect expects function, got a: ".concat(getInternalCtor(i)));return function(e,n){var t=_slicedToArray(React.useState({loading:!0,data:null}),2),r=t[0],o=t[1];return React.useEffect(function(){o(_objectSpread({},r,{loading:!0}));var t=i(e,n);if(!isPromiseLike(t))throw Error("withAsyncEffect expects Promise, got a: ".concat(getInternalCtor(t)));return t.then(function(t){return o({loading:!1,data:t})}),a},getDeps(_objectSpread({},e,n),c)),r}},withMemos=function(t,n){var r=unwindLoop(function(t,e,n,r){var o=isFunction(t)?t:t.func,i=getDeps(_objectSpread({},n,r),t.deps||e);return React.useMemo(function(){return o(n,r)},i)},t);return function(t,e){return r(n,t,e)}},withMemo=function(r,o,i){return function(t,e){var n=React.useMemo(function(){return o(t,e)},getDeps(_objectSpread({},t,e),i));return _defineProperty({},r,n)}},withContext=function(e,n){return function(){var t=React.useContext(e);return _defineProperty({},n,t)}},withReducer=function(o,i,c,a){return function(){var t,e=_slicedToArray(React.useReducer(o,a),2),n=e[0],r=e[1];return _defineProperty(t={},i,n),_defineProperty(t,c,r),t}},withEffect=function(r,o){return function(t,e){var n=getDeps(e,o);React.useEffect(r.bind(null,t,e),n)}},withState=function(o,i,c){return function(){var t,e=_slicedToArray(React.useState(c),2),n=e[0],r=e[1];return _defineProperty(t={},o,n),_defineProperty(t,i,r),t}},withRef=function(e,n){return function(){var t=React.useRef(n);return _defineProperty({},e,t)}};exports.combine=combine,exports.defaultProps=defaultProps,exports.flow=flow,exports.withAsyncEffect=withAsyncEffect,exports.withCallback=withCallback,exports.withCallbacks=withCallbacks,exports.withContext=withContext,exports.withEffect=withEffect,exports.withMemo=withMemo,exports.withMemos=withMemos,exports.withReducer=withReducer,exports.withRef=withRef,exports.withState=withState,exports.withStateHandlers=withStateHandlers;
